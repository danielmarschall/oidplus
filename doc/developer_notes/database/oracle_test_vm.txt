
Easy setup for Oracle DB testing
================================

Setup OracleDB Virtual Machine
------------------------------

Download "DeveloperDaysVM2019-05-31_20.ova" at https://www.oracle.com/database/technologies/databaseappdev-vm.html

Import OVA in Oracle VirtualBox

Set network mode to "Network bridge"

Boot Virtual Machine

Inside the VM, run "ifconfig" to see the IP address of eth0
also note the "Pluggable DB" which should be orcl.
You need to include it in the PDO configuration settings of OIDplus (see below).

Inside the VM, edit /u01/app/oracle/product/version/db_1/network/admin/listener.ora
(this is required so that you can connect to the PDB)
==> Add "USE_SID_AS_SERVICE_LISTENER=on" at the end

Type "service oracle restart"
==> Password "oracle"

Open sqlcl (SQLplus)

	Username:	sys as sysdba
	Password:	oracle

	create user oidplus identified by oidplus;
	grant create session to oidplus;
	grant create table to oidplus;
	grant select any sequence to oidplus;
	grant create any sequence to oidplus;
	grant all privileges to oidplus;

	Ctrl+D to escape

Open sqlcl (SQLplus)

	Username:	oidplus
	Password:	oidplus

	paste the struct SQL files from OIDplus
	Suggestion: Open new console Window
		cd Desktop
		wget https://raw.githubusercontent.com/danielmarschall/oidplus/master/setup/sql/struct_oracle.sql
		Then copy-paste the contents of this file into sqlcl
		
	Type "commit" (very important)

Note: Sometimes, the network connection will break. Then you need to enter "ifdown eth0" and "ifup eth0".


On the OIDplus machine (e.g. Windows)
-------------------------------------

On the OIDplus machine, download
	https://www.oracle.com/de/database/technologies/instant-client/winx64-64-downloads.html
	"Basic package"
	instantclient-basic-windows.x64-21.3.0.0.0
and extract it anywhere.

Extend the PATH environment variable by adding the directory where you extracted the instantclient

Reboot PC or logout and login to make the PATH environment variable effective

In the php.ini , enable the extension php_pdo_oci
	extension=pdo_oci

At OIDplus, edit userdata/baseconfig/config.inc.php:
	(IP-Address 10.0.22.152 is an example)
	OIDplus::baseConfig()->setValue('DATABASE_PLUGIN',   'PDO');
	OIDplus::baseConfig()->setValue('PDO_DSN',           "oci:dbname=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 10.0.22.152)(PORT = 1521)))(CONNECT_DATA = (SID = orcl)))");
	OIDplus::baseConfig()->setValue('PDO_USERNAME',      "oidplus"); # Alternative: hr
	OIDplus::baseConfig()->setValue('PDO_PASSWORD',      "oidplus"); # Alternative: oracle
	OIDplus::baseConfig()->setValue('TABLENAME_PREFIX',  '');

Note: orcl is the PDB (pluggable database) and orclcdb is the CDB (container)
